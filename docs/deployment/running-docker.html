

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Running GUANACO with Docker &mdash; GUANACO  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Running GUANACO from Console using system’s Python" href="running-python.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GUANACO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#clone-the-repository">1. Clone the repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#install-from-local-directory">2. Install from local directory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">GUANACO Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#dataset-overview-with-guanaco">Dataset Overview with GUANACO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#marker-genes-visualization">Marker Genes Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#heatmap">Heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#violin-plot">Violin Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#dot-plot">Dot Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#stacked-bar-plot">Stacked Bar Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#pseudotime-plot">Pseudotime Plot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#igv-browser">IGV Browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#cell-selection">Cell Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#export-selected-subgroup">Export Selected Subgroup</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Instruction for Using GUANACO</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#deployment-options">Deployment Options</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="configuring-json.html">Configuring Json File</a></li>
<li class="toctree-l3"><a class="reference internal" href="running-python.html">Running GUANACO from Console using system’s Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="running-python.html#run-locally">Run Locally</a></li>
<li class="toctree-l4"><a class="reference internal" href="running-python.html#deploy-in-server">Deploy in Server</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Running GUANACO with Docker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#run-locally">Run Locally</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploy-in-server">Deploy in Server</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GUANACO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Instruction for Using GUANACO</a></li>
      <li class="breadcrumb-item active">Running GUANACO with Docker</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/deployment/running-docker.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="running-guanaco-with-docker">
<h1>Running GUANACO with Docker<a class="headerlink" href="#running-guanaco-with-docker" title="Link to this heading"></a></h1>
<section id="run-locally">
<h2>Run Locally<a class="headerlink" href="#run-locally" title="Link to this heading"></a></h2>
<p>To run and install GUANACO using docker, only changes need to be made in the Json file and the AnnData or MuuData needs to be present in any given folder. There is no need to pull the code from git repository, it will be sufficient to just download the example Json file and create user’s own data. However, if the user has already downloaded the git repository, that is fine as well. The user just needs to use the appropriate folder path. There is no need to install python for docker, if there is an existing python in the machine, it is alright but not something necessary. Users can simply follow the mentioned steps using their terminal:</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="step-1-install-docker">
<h3>Step 1. Install Docker<a class="headerlink" href="#step-1-install-docker" title="Link to this heading"></a></h3>
<p>(Ignore this part if docker is already installed in the machine)</p>
<p>Install Docker in the local machine following the link: <a class="reference external" href="https://www.docker.com/products/docker-desktop/">https://www.docker.com/products/docker-desktop/</a>,</p>
<p>(For Linux the user can also use the following command: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">-y</span> <span class="pre">docker.io</span></code>)</p>
<p>Once docker is installed and running, the user can check the docker version by using this command: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">--version</span></code></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="step-2-run-docker-image">
<h3>Step 2. Run Docker Image<a class="headerlink" href="#step-2-run-docker-image" title="Link to this heading"></a></h3>
<p>Note: we have already built the docker image for GUANACO, user only needs to mount their data and Json file with the docker image, and it will be running fine, please follow the command precisely below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span><span class="o">{</span>directory<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>data<span class="o">}</span>:/app/data<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span><span class="o">{</span>your<span class="w"> </span>json<span class="w"> </span>file<span class="o">}</span>.json:/app/config.json<span class="w"> </span><span class="se">\</span>
systemimmunometabolism/guanaco
</pre></div>
</div>
<p>We have provided an example below of how it can be done in the user local machine, however, please do not strictly follow the example, it is just for understanding:</p>
<p><em>docker run -p 8080:8080 -v ~/Downloads:/app/data -v ~/Downloads/guanaco.json:/app/config.json systemimmunometabolism/guanaco</em></p>
<p>Here, the user does not have to name the data file only mapping it will be enough</p>
<p>The application will be running in <a class="reference external" href="http://0.0.0.0:8080/">http://0.0.0.0:8080/</a></p>
</section>
</section>
<section id="deploy-in-server">
<h2>Deploy in Server<a class="headerlink" href="#deploy-in-server" title="Link to this heading"></a></h2>
<p>To run and install GUANACO using docker, only changes need to be made in the Json file and the AnnData or MuuData needs to be present in any given folder. There is no need to pull the code from git repository, it will be sufficient to just download the example Json file and create user’s own data. However, if the user has already downloaded the git repository, that is fine as well. The user just needs to use the appropriate folder path. There is no need to install python for docker, if there is an existing python in the machine, it is alright but not something necessary. Users can simply follow the mentioned steps using their terminal.</p>
<p>Please note that the user must connect to their server for deployment. Connection can be made to the server using the following command (this depends completely on the server)</p>
<p><code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-i</span> <span class="pre">~/filepath/my-aws-key.pem</span> <span class="pre">instance-name&#64;&lt;EC2_PUBLIC_IP&gt;</span></code></p>
<p><strong>Note:</strong> The instance name is mostly the name of the OS image used for the server like ubuntu or ec2-user for linux, in this case ubuntu is much preferable as it comes with updated version of python, however this again depends on the server operator</p>
<section id="id1">
<h3>Step 1. Install Docker<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>(Ignore this part if docker is already installed in the machine)</p>
<p>Users can Install Docker in the virtual machine using this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>docker.io
</pre></div>
</div>
<p>Or the user can follow the instruction given by docker for setup in <a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p>
<p>Once docker is installed run the following commands to start docker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>docker
</pre></div>
</div>
<p>Add docker to user group using this command (this is not necessary but is just for convenience)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span><span class="nv">$USER</span>
</pre></div>
</div>
<p>Test docker setup by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>hello-world
</pre></div>
</div>
<p>Or, if docker is not added to user group</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>hello-world
</pre></div>
</div>
</section>
<section id="id2">
<h3>Step 2. Run Docker Image<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p><strong>Note:</strong> We have already built the docker image for GUANACO, user only needs to mount their data and Json file with the docker image, and it will be running fine, please follow the command precisely below.</p>
<p>To mount the Json file and data in the server, upload the files to the server using the command:
<code class="docutils literal notranslate"><span class="pre">scp</span> <span class="pre">-i</span> <span class="pre">/path/to/your-key.pem</span> <span class="pre">/path/to/your/file/guanaco.json</span> <span class="pre">ubuntu&#64;EC2_PUBLIC_IP:/home/ubuntu/</span></code></p>
<p>Once the files are uploaded, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span><span class="o">{</span>directory<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>data<span class="o">}</span>:/app/data<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span><span class="o">{</span>your<span class="w"> </span>json<span class="w"> </span>file<span class="o">}</span>.json:/app/config.json<span class="w"> </span><span class="se">\</span>
systemimmunometabolism/guanaco
</pre></div>
</div>
<p>Or, if docker is not added to user group</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span><span class="o">{</span>directory<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>data<span class="o">}</span>:/app/data<span class="w"> </span><span class="se">\</span>
-v<span class="w"> </span><span class="o">{</span>your<span class="w"> </span>json<span class="w"> </span>file<span class="o">}</span>.json:/app/config.json<span class="w"> </span><span class="se">\</span>
systemimmunometabolism/guanaco
</pre></div>
</div>
<p>The application will be running in <a class="reference external" href="http:/">http:/</a>/&lt;instance-public-ip&gt;:8080/ (or the url the IP is mapped to)</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="running-python.html" class="btn btn-neutral float-left" title="Running GUANACO from Console using system’s Python" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>